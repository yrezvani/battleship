(()=>{var e={334:(e,t,n)=>{const o=n(186);n(211),e.exports=function(){let e=o(),t=o();return{playerGameboard:e,aiGameboard:t,resetGame:function(){e=o(),t=o()}}}},186:(e,t,n)=>{const o=n(432);e.exports=function(){let e=Array(10).fill(null).map((()=>Array(10).fill(null))),t=[],n=[],r=[];return{placeShip:function(n,r,a,l){if(!function(e,n,o,r){if("Horizontal"===!r&&"Vertical"===!r)return console.log("Invalid orientation"),!1;for(let a=0;a<o;a++){let o="Horizontal"===r?e+a:e,l="Vertical"===r?n+a:n;if(o>9||l>9)return console.log(`Invalid placement: Ship exceeds boundaries at (${o}, ${l})`),!1;for(const e of t){let{startX:t,startY:n,orientation:r}=e.coordinates;for(let a=0;a<e.length;a++)if(o===("Horizontal"===r?t+a:t)&&l===("Vertical"===r?n+a:n))return console.log(`Overlap detected with ship at (${t}, ${n})`),!1}}return!0}(n,r,a,l))return console.log("Invalid placement"),!1;const i=o(a,l,n,r);t.push(i);for(let t=0;t<a;t++){let o={ship:i,segmentIndex:t};"Horizontal"===l?e[r][n+t]=o:e[r+t][n]=o}return console.log(`Placed ship at (${n}, ${r}) with length ${a} and orientation ${l}.`),!0},getCell:function(t,n){return e[n][t]},receiveAttack:function(e,o){let a=!1;return t.forEach((t=>{let{startX:n,startY:l,orientation:i}=t.coordinates;for(let c=0;c<t.length;c++)if(e===("Horizontal"===i?n+c:n)&&o===("Vertical"===i?l+c:l)){t.hit(c),r.push({x:e,y:o}),console.log("Hit detected at:",e,o),a=!0;break}})),a||(n.push({x:e,y:o}),console.log("Missed shot at:",e,o),!1)},getMissedShots:function(){return n},getSuccessfulHits:function(){return r},allSunk:function(){for(const e of t)if(!e.isSunk())return!1;return!0},getShips:function(){return t}}}},211:e=>{e.exports=function(){const e=[];return{prevMoves:e,generateRandCoordinates:function(){let t,n;do{t={x:Math.floor(10*Math.random()),y:Math.floor(10*Math.random())},n=`${t.x.toString()},${t.y.toString()}`}while(e.includes(n));return e.push(n),t}}}},432:e=>{e.exports=function(e,t,n,o){const r=new Array(e).fill(!1);let a={startX:n,startY:o,orientation:t};return console.log("ship created"),{length:e,hits:r,coordinates:a,hit:function(e){return e>=0&&e<this.length&&(this.hits[e]=!0),this},isSunk:function(){return this.hits.every((e=>!0===e))}}}}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}(()=>{const e=n(334);document.addEventListener("DOMContentLoaded",(()=>{const t=function(e){const t=document.querySelector(`.${e}`);t.innerHTML="";for(let e=0;e<10;e++){const n=document.createElement("div");n.classList.add("row");for(let t=0;t<10;t++){const o=document.createElement("div");o.classList.add("cell"),o.dataset.x=t,o.dataset.y=e,n.append(o)}t.append(n)}};let n=[4,4,3,3,2],o="Horizontal",r=e();t("friendly"),t("enemy"),c(),document.querySelector(".orientation-btn").addEventListener("click",(function(e){o="Horizontal"===o?"Vertical":"Horizontal",e.target.nextElementSibling.textContent=o}));const a=function(e){if(!e.target.classList.contains("cell"))return;const t=e.target,a=parseInt(t.dataset.x,10),s=parseInt(t.dataset.y,10),d=o,u=n[0],f=i(a,s,u,d);!1!==r.playerGameboard.placeShip(a,s,u,d)?(n.shift(),c(),f.forEach((e=>{const t=document.querySelector(`.grid.friendly .cell[data-x="${e.x}"][data-y="${e.y}"]`);t&&l(t,"ship")}))):alert("Invalid placement! Try again!")};function l(e,t){const n=document.createElement("i");"ship"===t?n.className="fa-solid fa-ship":e.textContent="hit"===t?"ðŸ’¥":"ðŸš«",e.append(n)}document.querySelector(".grid.friendly").addEventListener("click",a);const i=function(e,t,n,o){const r=[];if("Horizontal"===o)for(let o=0;o<n;o++)r.push({x:e+o,y:t});else for(let o=0;o<n;o++)r.push({x:e,y:t+o});return r};function c(){const e=document.getElementById("ship-length"),t=document.getElementById("orientation"),o=document.querySelector(".orientation-btn"),r=document.querySelector(".text-container"),l=document.querySelector(".feedback");if(n.length>0){const t=n[0];e.textContent=`Click to place a ship (length: ${t})`}else{e.style.display="none",t.style.display="none",o.style.display="none";const n=document.createElement("h2");n.textContent="Your Waters",n.classList.add("side"),r.append(n),document.querySelector(".grid.friendly").removeEventListener("click",a),s(),l.textContent="Attack AI ships",document.querySelector(".grid.enemy").addEventListener("click",d)}}const s=function(){const e=[4,4,3,3,2],t=["Horizontal","Vertical"];console.log(`Before loop: ${e}`),e.forEach((n=>{console.log("Starting AI ship placement."),console.log(`Inside loop: ${e}`);let o=!1,a=0;do{console.log(`length: ${n}`);const e=Math.floor(10*Math.random()),l=Math.floor(10*Math.random()),i=Math.floor(Math.random()*t.length),c=t[i];if(o=r.aiGameboard.placeShip(e,l,n,c),a++,a>100){console.log(`Failed to place AI ship of length ${n} after 100 attempts.`);break}}while(!o)}))};function d(e){const t=document.querySelector(".feedback");if(!e.target.classList.contains("cell"))return;const n=e.target,o=parseInt(n.dataset.x),a=parseInt(n.dataset.y);console.log(r.aiGameboard.getCell(o,a)),l(n,r.aiGameboard.receiveAttack(o,a)?"hit":"miss"),r.aiGameboard.allSunk()?(t.textContent="You Win!",document.querySelector(".grid.enemy").removeEventListener("click",d)):function(){let e,t;const n=document.querySelector(".feedback"),o=r.playerGameboard.getMissedShots(),a=r.playerGameboard.getSuccessfulHits(),i=o.concat(a);let c=!0;for(;;){c=!0,e=Math.floor(10*Math.random()),t=Math.floor(10*Math.random());for(const n of i)if(n.x===e&&n.y===t){c=!1;break}if(c){l(document.querySelector(`.grid.friendly .cell[data-x="${e}"][data-y="${t}"]`),r.playerGameboard.receiveAttack(e,t)?"hit":"miss"),r.playerGameboard.allSunk()&&(n.textContent="You Lost!",document.querySelector(".grid.enemy").removeEventListener("click",d));break}}}()}document.getElementById("reset").addEventListener("click",(function(){const t=document.querySelector(".feedback");n=[4,4,3,3,2],o="Horizontal";const l=document.querySelectorAll(".cell");t.textContent="Place your ships",c(),r=e(),r.resetGame(),l.forEach((e=>{e.firstChild&&(e.removeChild(e.firstChild),e.className="cell")})),document.querySelector(".grid.friendly").addEventListener("click",a)}))}))})()})();
//# sourceMappingURL=main.js.map